# 熔断turbine部署文档

## 功能用途

熔断turbine项目是监控线上微服务调用的一个服务组件，主要用于查看微服务调用健康状态，熔断状态的动态曲线图
该服务不对外提供服务，主要用于内部监控查看调用压力的一个监控工具。

## 编写目的

描述熔断的配置细节和部署步骤。本文档使用人员：运维人员、开发人员。

## 模块名称（service）

1. turbine-service 服务

## 应用类别：服务

## 部署路径

- 部署路径：/apps/turbineservice/
- 业务日志路径：/logdata/turbineservice/
- 打点日志路径：/logdata/logs/service/turbineservice/

## 配置文件(如涉及配置修改请注明)

该服务需要连接服务注册中心（eureka）
部署时请注意检测（配置）线上的eureka配置（多个用“,”分割）
配置例示：http://192.168.101.213:8889/eureka/

### 启动说明(如多模块有启动顺序需说明)

1.启动jvm参数已配置到脚本 ctrl.sh，具体可修改当中部分参数。
  如jvm内存设置为1G，示例：jvm_mem='-Xms1024m -Xmx1024m -Xmn512m'

### 模块相关URI(附所有URL全地址)

#### 外网正式环境

不对外提供服务

#### 外网测试环境
不对外提供服务

## 项目依赖说明（如涉及调用第三方或被外部调用请注明）
无
#### 受限第三方IP白名单（如为是，需指定部署服务器IP）：否

#### 公共组件依赖（disconf & 授权中心 & zookeeper  & eureka）

1.项目依赖eureka服务，具体按照线上eureka服务地址配置到application-prod.yml

#### 部署前置条件(运营系统需提前执行的操作)：无

#### 其他扩展依赖(如为是，需指定部署说明)：无

## 本次变更说明
无
#### 本次变更内容（简单描述本次变更）
无
#### 部署步骤(按具体项目情况描述)

1. 请根据实际情况选择机器进行部署，采集调用关系时，改项目的网络环境需要走通到被监控的服务。

2. 检查或配置文件 受检文件对象（application.properties) 
   配置监控对象说明（app-config配置监控的对象多个用"","分割，如app-config: operatorInstructions,service-hi）：
     
3. 启动程序。（改程序启动端口号为3005）

4. 启动之后登陆：http:ip:3005/hystrix/  
   在界面中有三个参数是需要手动填写的，第一个是监控的入口，第二个刷新时间（默认即可），第三个标题（默认也可以手填写）
   第一个参数填写说明：
   监控多个被监控的对象时：http://ip:3005/turbine.stream    （该ip为部署改项目的ip）
   监控指定的监控的对象时：http://ip:3005/turbine.stream    （该ip为指定被监控对象的ip）
   
   